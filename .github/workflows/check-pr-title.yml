name: Check PR title
on:
  pull_request:
    branches: [ 'main' ]
    types: [ 'opened', 'reopened', 'edited', 'synchronize' ]

# Define explicit permissions following the principle of least privilege
permissions:
  pull-requests: read  # Needed to read PR information
  contents: read       # Needed to checkout code

jobs:
  check_pr_title:
    name: Check PR title
    runs-on: ubuntu-latest
    steps:
      - name: Harden the runner (Audit all outbound calls)
        uses: step-security/harden-runner@95d9a5deda9de15063e7595e9719c11c38c90ae2 # v2.13.2
        with:
          egress-policy: audit

      - name: Checkout source branch
        uses: actions/checkout@08eba0b27e820071cde6df949e0beb9ba4906955 # v4.3.0

      - name: Check PR title
        uses: rudderlabs/github-action-check-pr-title@0a83071336f7d6417249629f67a64530fcecda2e # v1.0.11